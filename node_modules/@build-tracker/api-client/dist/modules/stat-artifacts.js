"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var glob_1 = __importDefault(require("glob"));
var path_1 = __importDefault(require("path"));
var readfile_1 = __importDefault(require("./readfile"));
var defaultNameMapper = function (fileName) { return fileName; };
function statArtifacts(config) {
    var artifactGlobs = config.artifacts, baseDir = config.baseDir, cwd = config.cwd, getFilenameHash = config.getFilenameHash, _a = config.nameMapper, nameMapper = _a === void 0 ? defaultNameMapper : _a;
    var artifacts = new Map();
    artifactGlobs.forEach(function (fileGlob) {
        glob_1.default.sync(path_1.default.resolve(cwd, fileGlob), { nodir: true }).forEach(function (filePath) {
            var sizes = readfile_1.default(filePath, getFilenameHash);
            artifacts.set(nameMapper(path_1.default.relative(baseDir, filePath).replace("." + sizes.hash, '')), sizes);
        });
    }, []);
    return artifacts;
}
exports.default = statArtifacts;
//# sourceMappingURL=stat-artifacts.js.map